Accurate and reliable fault diagnosis for rotating machinery especially under variable working conditions remains a great challenge. Existing deep learning methods which extract features from single domain are insufficient to ensure reliable diagnosis results. In this study a new deep learning based fault diagnosis method which extracts features from both time and frequency domains is proposed. Two sets of deep features from multiple domains are fused into intrinsic low-dimensional features by local and global principle component analysis. And a new ensemble kernel extreme learning machine is proposed for fault pattern classification based on the fused features. Extensive experiments on gearbox rotor and engine rolling bearing show that the proposed method has better diagnosis performance than state-of-the-art methods and is more adaptable to the fluctuation of working conditions. Fault diagnosis of rotating machinery with ensemble kernel extreme learning machine based on fused multi-domain features.