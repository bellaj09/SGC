A major challenge in electroencephalogram EEG-based brain-computer interfaces BCIs is the inherent nonstationarities in the EEG data. Variations of the signal properties from intra and inter sessions often lead to deteriorated BCI performances as features extracted by methods such as common spatial patterns CSP are not invariant against the changes. To extract features that are robust and invariant this paper proposes a novel spatial filtering algorithm called Kullback-Leibler KL CSP. The CSP algorithm only considers the discrimination between the means of the classes but does not consider within-class scatters information. In contrast the proposed KLCSP algorithm simultaneously maximizes the discrimination between the class means and minimizes the within-class dissimilarities measured by a loss function based on the KL divergence. The performance of the proposed KLCSP algorithm is compared against two existing algorithms CSP and stationary CSP sCSP using the publicly available BCI competition III dataset IVa and a large dataset from stroke patients performing neuro-rehabilitation. The results show that the proposed KLCSP algorithm significantly outperforms both the CSP and the sCSP algorithms in terms of classification accuracy by reducing within-class variations. This results in more compact and separable features. Optimizing spatial filters by minimizing within-class dissimilarities in electroencephalogram-based brain-computer interface.