In the indoor environment the activity of the pedestrian can reflect some semantic information. These activities can be used as the landmarks for indoor localization. In this paper we propose a pedestrian activities recognition method based on a convolutional neural network. A new convolutional neural network has been designed to learn the proper features automatically. Experiments show that the proposed method achieves approximately 98% accuracy in about 2 s in identifying nine types of activities including still walk upstairs up elevator up escalator down elevator down escalator downstairs and turning. Moreover we have built a pedestrian activity database which contains more than 6 GB of data of accelerometers magnetometers gyroscopes and barometers collected with various types of smartphones. We will make it public to contribute to academic research. Smartphone-Based Activity Recognition for Indoor Localization Using a Convolutional Neural Network.